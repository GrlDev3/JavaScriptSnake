<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <![endif]-->
<html>
    <head>
        <!--meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge"-->
        <title>Welcome to Snake!</title>
        <!--meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href=""-->
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <!--h1>Welcome to Snake!</h1-->
        <canvas id="gameCanvas" width="300" height="300">&lt;</canvas>
        <script>
            //get the canvas element
            const gameCanvas=document.getElementById("gameCanvas");
            //get 2d context
            const ctx=gameCanvas.getContext("2d");

            let snake = [
                {x:150, y:150},
                {x:140, y:150},
                {x:130, y:150},
                {x: 120, y: 150},
                {x: 110, y: 150}
            ];

            let dx = 10; //the horizontal velocity of the snake
            let dy = 0; //the vertical velocity of the snake
            
            //The game
            main();

            /**
             * Main function of the game (not needed yet to be a function)
             */
            function main(){
                setTimeout(function onTick(){
                    clearCanvas();
                    advanceSnake();
                    drawSnake();

                    main(); //call main again
                }, 100);

            }

            /** 
             * Change the background color to white and draw a black border around it
             */
            function clearCanvas(){
                ctx.fillStyle = "white";    //select color to fill the drawing
                ctx.strokestyle = "black";  //select color for the border
                ctx.fillRect(0,0, gameCanvas.width, gameCanvas.height);     //draw a "filled" rectangle to cover the entire canvas
                ctx.strokeRect(0,0, gameCanvas.width, gameCanvas.height);   //draw a "border" around the entire canvas
            }

            /**
             * Draws a part of the snake on the canvas
             * @param {object} snakePart - The coordinates where the part should be drawn
             */
            function drawSnakePart(snakePart){
                ctx.fillStyle = 'lightgreen';
                ctx.strokestyle = 'darkgreen';
                ctx.fillRect(snakePart.x, snakePart.y, 10, 10);
                ctx.strokeRect(snakePart.x, snakePart.y, 10, 10);
            }

            /**
             * Draws the snake on the canvas
             */
            function drawSnake(){
                snake.forEach(drawSnakePart);
            }

            function advanceSnake(){
                const head = {x: snake[0].x + dx, y:snake[0].y + dy}; //make a new element
                snake.unshift(head); //add the new element at the front of the array
                snake.pop(); //remove the last element
            }
            
        </script>
    </body>
</html>